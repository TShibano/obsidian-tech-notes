---
title: "データレイク"
date: 2026-02-06
tags:
  - Cloud
  - DB
related:
  - "[[データ基盤]]"
  - "[[データウェアハウス]]"
  - "[[データマート]]"
  - "[[オブジェクトストレージ]]"
  - "[[MinIO]]"
  - "[[Apache Parquet]]"
  - "[[Apache Avro]]"
  - "[[データカタログ]]"
---

## 概要

データレイクとは、構造化・半構造化・非構造化を問わず、あらゆる種類のデータを元の形式（生データ）のまま一元的に格納できるストレージシステムである。「スキーマ・オン・リード（読み取り時にスキーマを適用）」の方式を採用し、データを利用する段階で目的に応じた構造化を行う点が、事前にスキーマを定義する[[データウェアハウス]]との大きな違いである。

## 詳細

### データレイクの仕組み

データレイクは以下の4つのレイヤーで構成される:

| レイヤー | 役割 |
|----------|------|
| **取り込み層（Ingestion）** | IoT デバイス、トランザクション DB、API、ストリーミングソースなどからデータを収集・統合する入口 |
| **ストレージ層（Storage）** | 生データをそのままの形式で保管。スケーラビリティ、コスト効率、耐久性が重視される |
| **処理層（Processing）** | 生データを変換・加工し、分析や ML モデルのトレーニングに利用可能な形にする |
| **ガバナンス層（Governance）** | メタデータ管理、アクセス制御、データリネージの追跡により品質・セキュリティ・コンプライアンスを維持 |

### スキーマ・オン・リード vs スキーマ・オン・ライト

- **スキーマ・オン・リード（データレイク）**: データ格納時にはスキーマを定義せず、読み取り時に目的に応じたスキーマを適用する。柔軟性が高く、多様な分析に対応できる
- **スキーマ・オン・ライト（[[データウェアハウス]]）**: データ格納時に事前定義されたスキーマに変換する。クエリ性能が高く、一貫性のあるデータが保証される

### データレイクと他のストレージとの比較

| 観点 | データレイク | [[データウェアハウス]] | [[データマート]] |
|------|-------------|---------------------|-----------------|
| データ形式 | 生データ（構造化/非構造化） | 構造化データのみ | 構造化データのみ |
| スキーマ | スキーマ・オン・リード | スキーマ・オン・ライト | スキーマ・オン・ライト |
| ユーザー | データサイエンティスト、エンジニア | ビジネスアナリスト | 部門ユーザー |
| 主な用途 | 探索的分析、ML、データ保存 | BI、定型レポート | 部門別分析 |

### よく用いられるツール

#### クラウドストレージ型

| ツール | 提供元 | 特徴 |
|--------|--------|------|
| **Amazon S3** | AWS | 99.999999999%（イレブンナイン）の耐久性。Athena、Glue、EMR 等の AWS 分析サービスとシームレスに統合。ストレージとコンピュートの分離アーキテクチャ |
| **Azure Data Lake Storage（ADLS）** | Microsoft | Hadoop、Spark との互換性。Azure Synapse Analytics との統合。階層型名前空間によるディレクトリ管理 |
| **Google Cloud Storage** | Google | BigQuery との統合。統一されたオブジェクトストレージ。BigLake によるマルチクラウド対応 |

#### 分散処理基盤型

| ツール | 特徴 |
|--------|------|
| **Apache Hadoop（HDFS）** | オープンソースの分散ストレージ・処理基盤。オンプレミス環境で広く利用されてきたが、近年はクラウドストレージへの移行が進む |
| **Databricks（Delta Lake）** | Apache Spark ベースの統合分析プラットフォーム。Delta Lake フォーマットにより ACID トランザクションを実現 |

#### オープンテーブルフォーマット

| フォーマット | 特徴 |
|-------------|------|
| **[[Apache Iceberg]]** | Netflix 発のオープンテーブルフォーマット。スキーマ進化、タイムトラベル、パーティション進化に対応 |
| **Delta Lake** | Databricks 発。ACID トランザクション、スキーマ適用、タイムトラベルをサポート |
| **Apache Hudi** | Uber 発。インクリメンタルデータ処理に強み。CDC ワークロードに適する |

### 最新動向（2025〜2026年）

#### レイクハウスアーキテクチャへの進化

データレイクのスケーラビリティと[[データウェアハウス]]のトランザクション管理を融合した**レイクハウス**が台頭している。オープンテーブルフォーマットの普及により、データレイク上で DWH 相当の ACID トランザクションやスキーマ管理が可能になった。

#### オープンテーブルフォーマットの統一

Delta Lake と [[Apache Iceberg]] の統一戦略が進行中。「データ層」「メタデータ層」「カタログ層」の3階層で段階的に統一が進められ、フォーマットを意識せずデータを活用できるエコシステムを目指している。

#### クラウドベンダーの対応強化

- Google Cloud は BigLake Iceberg ネイティブストレージを発表
- AWS は S3 Tables で Iceberg をネイティブサポート
- 各社がオープンテーブルフォーマットへの対応を強化し、ベンダーロックインの低減が進んでいる

### データスワンプの回避

データレイクはガバナンスが不十分だと、データの品質や所在が不明な「データスワンプ（データの沼）」に陥るリスクがある。回避策として以下が重要:

- メタデータの適切な管理とデータカタログの整備
- アクセス制御とセキュリティポリシーの策定
- データ品質のモニタリングとデータリネージの追跡
- データ保持ポリシーとライフサイクル管理の導入

## ポイント

- あらゆる形式のデータを生の状態で格納でき、分析時に柔軟にスキーマを適用できる
- クラウドストレージ（S3、ADLS、GCS）がデファクトスタンダードとなっている
- オープンテーブルフォーマット（Iceberg、Delta Lake、Hudi）によりレイクハウスへの進化が進行中
- ガバナンスの欠如は「データスワンプ」を招くため、メタデータ管理とデータカタログが必須
- [[データ基盤]]の3層構造においてデータの入口に位置し、[[データウェアハウス]]や[[データマート]]へデータを供給する

## 関連項目

- [[データ基盤]]
- [[データウェアハウス]]
- [[データマート]]
- [[Apache Iceberg]]
- [[オブジェクトストレージ]]
- [[MinIO]]
- [[Apache Parquet]]
- [[Apache Avro]]
- [[データカタログ]]

## 参考

- [AWS - What is a Data Lake?](https://aws.amazon.com/what-is/data-lake/)
- [Microsoft Learn - データレイクとは](https://learn.microsoft.com/ja-jp/azure/architecture/data-guide/scenarios/data-lake)
- [Splunk - データレイクの考察：メリット、課題、ベストプラクティス](https://www.splunk.com/ja_jp/blog/platform/data-lakes.html)
- [IBM - Data Warehouses vs. Data Lakes vs. Data Lakehouses](https://www.ibm.com/think/topics/data-warehouse-vs-data-lake-vs-data-lakehouse)
- [APC技術ブログ - Delta LakeとIcebergは統一されるのか？](https://techblog.ap-com.co.jp/entry/2025/07/01/161518)
- [Oracle - クラウドベースのデータレイクの推奨パターン](https://docs.oracle.com/ja/solutions/arch-center-about-data-lake/recommended-patterns-cloud-based-data-lakes1.html)
