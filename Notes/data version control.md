---
title: "data version control"
date: 2026-02-07
tags:
  - DevOps
  - AI
  - ML
related:
  - "[[データレイク]]"
  - "[[Apache Iceberg]]"
  - "[[MLOps]]"
---

## 概要

データバージョン管理（Data Version Control）とは、データセットや ML モデルの変更履歴を追跡・管理する手法およびツール群の総称である。ソフトウェア開発における Git のようなバージョン管理を、データと機械学習のワークフローに適用することで、実験の再現性、データ品質の保証、チーム間の協調を実現する。

## 詳細

### 背景と歴史

データバージョン管理の必要性は 1985 年にまで遡り、データベースのタイミング属性に関する研究が行われていた。2010 年代に入ると、ビッグデータの急速な拡大に伴い、Apache Hadoop エコシステムやオブジェクトストレージが台頭し、データバージョン管理の研究が本格化した。

- **2012年**: SciDB データベースで初のバージョン管理データベースが提案
- **2016年**: Kaggle コンペティションでデータバージョン管理システムのプロトタイプが開発
- **2017年**: DVC（Data Version Control）がオープンソースとして公開
- **2020年代**: lakeFS、Pachyderm 等の大規模対応ツールが登場

### なぜデータバージョン管理が必要か

ソフトウェアのコードと異なり、データには以下の特有の課題がある:

| 課題 | 説明 |
|------|------|
| **サイズ** | データセットは数 GB〜TB 規模になることがあり、Git のような従来のバージョン管理では扱えない |
| **再現性** | ML モデルの学習結果を再現するには、同一のデータセット・パラメータ・コードが必要 |
| **変更の追跡** | データの前処理、クレンジング、拡張などの変更履歴を把握する必要がある |
| **ガバナンス** | GDPR 等の規制により、データの変更・アクセス履歴の監査が求められる |
| **協調作業** | 複数のデータサイエンティストが同じデータセットで並行して実験を行う |

### 主要ツール

#### DVC（Data Version Control）

Git と連携して動作するオープンソースのデータ・モデルバージョン管理ツール。2025年11月に lakeFS に買収されたが、オープンソースとして継続開発されている。

| 項目 | 内容 |
|------|------|
| **ライセンス** | Apache 2.0 |
| **対応ストレージ** | S3、Google Cloud Storage、Azure Blob Storage、SSH、HDFS 等 |
| **主要機能** | データバージョニング、パイプライン定義・実行、実験トラッキング |
| **特徴** | Git ベース。軽量なメタデータ（.dvc ファイル）を Git で管理し、実データは外部ストレージに保存 |
| **適用規模** | 小〜中規模プロジェクト（1万オブジェクト以下が推奨） |
| **インタフェース** | CLI、Python API、VS Code 拡張 |

**仕組み**: DVC はデータファイルのハッシュ値を含む軽量なメタファイル（`.dvc`）を生成し、このメタファイルを Git でバージョン管理する。実データはリモートストレージに保存され、`dvc push` / `dvc pull` で同期する。

#### lakeFS

[[データレイク]]上に Git ライクなバージョン管理を提供するオープンソースプラットフォーム。ペタバイト規模のデータに対応し、データのコピーなしにブランチ・マージ・コミットを実現する。

| 項目 | 内容 |
|------|------|
| **ライセンス** | Apache 2.0 |
| **対応ストレージ** | S3、Azure Blob Storage、Google Cloud Storage、S3 互換ストレージ |
| **主要機能** | ブランチ・マージ・コミット、タイムトラベル、RBAC、Iceberg カタログ |
| **特徴** | データのコピーなしにバージョニング。S3 互換 API で既存ツールとの連携が容易 |
| **適用規模** | 大規模データレイク（ペタバイト規模） |

**アーキテクチャ**: lakeFS は「Graveler」と呼ばれるメタデータエンジンでバージョニングを管理し、ストレージアダプタを通じて各種オブジェクトストレージと通信する。データ自体はコピーせず、メタデータレベルでブランチやコミットを管理するため、ストレージコストが抑えられる。

#### その他の主要ツール

| ツール | 特徴 |
|--------|------|
| **Pachyderm** | エンドツーエンドの ML プラットフォーム。データリネージの自動追跡、コンテナベースのパイプライン。大規模本番環境向け |
| **Delta Lake** | Databricks 発のオープンテーブルフォーマット。ACID トランザクションとタイムトラベルによるバージョニング |
| **[[Apache Iceberg]]** | テーブルレベルのスナップショット管理とタイムトラベルクエリによるバージョニング |
| **Git LFS** | Git の拡張。大容量ファイルのポインタを Git で管理。データ専用ツールに比べて機能は限定的 |
| **Weights & Biases** | ML 実験トラッキング・データセットバージョニング・モデル管理の統合プラットフォーム |
| **Neptune.ai** | スケーラブルな実験トラッキング。数千の同時実験と大規模アーティファクトの管理に対応 |

### ツールの選定指針

| ユースケース | 推奨ツール |
|-------------|-----------|
| 小規模 ML プロジェクト、Git 中心のワークフロー | DVC |
| 大規模データレイク上のデータバージョニング | lakeFS |
| エンドツーエンドの ML パイプライン管理 | Pachyderm |
| テーブルデータのバージョニング（分析基盤） | Delta Lake、[[Apache Iceberg]] |
| ML 実験のトラッキングとモデル管理 | Weights & Biases、Neptune.ai |

### ベストプラクティス

- **頻繁なコミット**: データの変更は早期かつ頻繁にコミットし、変更内容を明確なメッセージで記録する
- **ブランチ戦略**: 実験用ブランチを作成し、成功した結果のみをメインブランチにマージする
- **メタデータの管理**: データのスキーマ、統計情報、リネージ（来歴）を併せて管理する
- **自動化**: CI/CD パイプラインにデータバリデーションとバージョニングを組み込む
- **ストレージの最適化**: 差分管理やデータの重複排除によりストレージコストを抑制する

### 最新動向（2026年）

- **lakeFS による DVC 買収**（2025年11月）: データバージョン管理ツールの統合が進行。DVC はオープンソースとして継続しつつ、lakeFS のエコシステムに統合
- **Iceberg カタログとの統合**: lakeFS がネイティブ Iceberg REST カタログを提供し、構造化・非構造化データの統合バージョン管理が可能に
- **AI/ML パイプラインとの融合**: [[MLOps]] プラットフォームにデータバージョン管理が標準機能として組み込まれるトレンド

## ポイント

- データバージョン管理は ML の再現性・ガバナンス・チーム協調に不可欠な基盤技術
- DVC は Git ベースで軽量、小〜中規模プロジェクトに適する
- lakeFS はデータレイク上でコピーなしのバージョニングを実現し、大規模環境に対応
- テーブルデータには Apache Iceberg や Delta Lake のタイムトラベル機能も活用可能
- 2025年の lakeFS による DVC 買収により、エコシステムの統合が進行中

## 関連項目

- [[MLOps]] - データバージョン管理を含む ML ライフサイクル管理
- [[データレイク]] - lakeFS がバージョン管理を提供する対象
- [[Apache Iceberg]] - テーブルレベルのスナップショットによるバージョニング

## 参考

- [DVC 公式サイト](https://dvc.org/)
- [DVC ドキュメント - Get Started](https://doc.dvc.org/start)
- [lakeFS 公式サイト](https://lakefs.io/)
- [lakeFS - Data Version Control: What It Is and How It Works](https://lakefs.io/data-version-control/)
- [lakeFS - Best Data Version Control Tools in 2026](https://lakefs.io/data-version-control/dvc-tools/)
- [Neptune.ai - Best Data Version Control Tools](https://neptune.ai/blog/best-data-version-control-tools)
- [Wikipedia - Data version control](https://en.wikipedia.org/wiki/Data_version_control)
