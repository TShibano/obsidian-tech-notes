---
title: "データレイクハウス"
date: 2026-02-07
tags:
  - Cloud
  - DB
related:
  - "[[データレイク]]"
  - "[[データウェアハウス]]"
  - "[[データ基盤]]"
  - "[[Apache Iceberg]]"
  - "[[Apache Parquet]]"
  - "[[MLOps]]"
---

## 概要

データレイクハウス（Data Lakehouse）は、[[データレイク]]のスケーラビリティとコスト効率、[[データウェアハウス]]のトランザクション管理とデータ品質を統合したデータアーキテクチャである。オープンテーブルフォーマットを活用し、低コストなオブジェクトストレージ上で ACID トランザクション、スキーマ管理、タイムトラベルクエリなどを実現する。

## 詳細

### 背景：なぜレイクハウスが登場したか

従来のデータアーキテクチャでは、[[データレイク]]と[[データウェアハウス]]を別々に構築・運用する「2層アーキテクチャ」が一般的だった。しかしこのアプローチには以下の課題があった:

- **データの重複**: 同じデータをデータレイクと DWH の両方に格納する必要があり、ストレージコストとETLの複雑さが増大
- **データの鮮度**: データレイクから DWH への ETL パイプラインにより、分析可能になるまでに遅延が発生
- **ガバナンスの分断**: 2つのシステムにまたがるデータガバナンスの一貫性維持が困難
- **ML ワークロードの制約**: DWH は構造化データに特化しており、ML に必要な非構造化データの処理に不向き

レイクハウスはこれらの課題を解消するため、Databricks が 2020 年に提唱したアーキテクチャである。

### アーキテクチャ

レイクハウスは以下の5層で構成される:

| レイヤー | 役割 |
|----------|------|
| **取り込み層（Ingestion）** | トランザクション DB、API、ストリーミングソースなどからデータを取り込む |
| **ストレージ層（Storage）** | 低コストなオブジェクトストレージ（S3、ADLS、GCS）に [[Apache Parquet]] 等のオープンフォーマットで格納 |
| **メタデータ層（Metadata）** | オープンテーブルフォーマット（[[Apache Iceberg]]、Delta Lake 等）が ACID トランザクション、スキーマ管理、バージョニングを担う |
| **カタログ層（Catalog）** | データカタログがテーブルの発見、アクセス制御、リネージ管理を提供 |
| **消費層（Consumption）** | SQL エンジン、BI ツール、ML フレームワークが統一的にデータにアクセス |

### メダリオンアーキテクチャ

レイクハウスでは、データの品質を段階的に向上させる**メダリオンアーキテクチャ**（Bronze → Silver → Gold）が広く採用されている:

| 層 | 役割 | データの状態 |
|----|------|-------------|
| **Bronze（ブロンズ）** | 生データの取り込み | ソースからの生データをそのまま保存。スキーマ・オン・リード |
| **Silver（シルバー）** | クレンジング・統合 | 重複排除、型変換、フィルタリングを行い、整合性のあるデータに変換 |
| **Gold（ゴールド）** | ビジネス利用 | ビジネスロジックを適用し、BI・レポーティング・ML に即座に利用可能な状態 |

### データレイク・DWH・レイクハウスの比較

| 観点 | [[データレイク]] | [[データウェアハウス]] | データレイクハウス |
|------|-------------|---------------------|-------------------|
| データ形式 | 構造化/半構造化/非構造化 | 構造化のみ | 構造化/半構造化/非構造化 |
| スキーマ | スキーマ・オン・リード | スキーマ・オン・ライト | 両方対応 |
| ACID トランザクション | なし | あり | あり |
| データ品質 | 低（ガバナンスに依存） | 高 | 高 |
| コスト | 低（オブジェクトストレージ） | 高（専用コンピュートリソース） | 低〜中（ストレージとコンピュート分離） |
| 主な用途 | データ保存、探索的分析、ML | BI、定型レポート | BI、ML、リアルタイム分析を統合 |
| 対象ユーザー | データエンジニア、データサイエンティスト | ビジネスアナリスト | 全データ利用者 |

### オープンテーブルフォーマット

レイクハウスの中核を担うのがオープンテーブルフォーマットである:

| フォーマット | 発祥 | 特徴 |
|-------------|------|------|
| **[[Apache Iceberg]]** | Netflix（2018年） | スキーマ進化、パーティション進化、タイムトラベルに対応。クラウドベンダー各社がネイティブサポート |
| **Delta Lake** | Databricks | ACID トランザクション、スキーマ適用、UniForm による Iceberg/Hudi 互換性 |
| **Apache Hudi** | Uber | インクリメンタル処理、CDC ワークロードに強み |
| **Apache Paimon** | Flink コミュニティ | ストリーミングファースト設計。リアルタイムレイクハウスに特化 |

2026年現在、Databricks による Tabular 社の買収を契機に Delta Lake と [[Apache Iceberg]] の統一が進行中であり、フォーマットを意識せずにデータを活用できるエコシステムが形成されつつある。

### 主要プラットフォーム

| プラットフォーム | 特徴 |
|----------------|------|
| **Databricks** | レイクハウスの提唱者。Delta Lake ベース。ML/AI パイプラインに強み。Unity Catalog による統合ガバナンス |
| **Snowflake** | クラウド DWH からレイクハウスへ拡張。Iceberg Tables のネイティブサポート。Snowpark で ML 対応 |
| **AWS（S3 + Athena/Glue）** | S3 Tables で Iceberg をネイティブサポート。サーバーレス構成が可能 |
| **Google Cloud（BigLake）** | BigQuery と統合。Iceberg ネイティブストレージ。マルチクラウド対応 |
| **Azure（Fabric）** | OneLake による統合ストレージ。Delta Lake ベース。Power BI とのネイティブ連携 |

### 最新動向（2026年）

- **フォーマット統一**: Delta Lake UniForm により、Delta テーブルを Iceberg/Hudi クライアントから読み取り可能に
- **AI・エージェント統合**: レイクハウスがリアルタイム分析だけでなく、エージェント AI やエッジ推論のデータ基盤としても活用
- **自律的最適化**: コンパクション、インデキシング、パーティショニングの自動最適化が標準機能に
- **ストリーミングファースト**: バッチ取り込みからストリーミング取り込みへの移行が加速
- **カタログ駆動ガバナンス**: Unity Catalog、Polaris Catalog など、カタログを中心としたデータガバナンスが主流に

## ポイント

- データレイクの低コスト・柔軟性と DWH のトランザクション管理・データ品質を統合したアーキテクチャ
- オープンテーブルフォーマット（Iceberg、Delta Lake 等）がレイクハウスの中核技術
- メダリオンアーキテクチャ（Bronze → Silver → Gold）でデータ品質を段階的に向上
- BI と ML のワークロードを単一のプラットフォームで処理でき、データの重複と ETL の複雑さを削減
- 2026年現在、フォーマット統一とカタログ駆動ガバナンスが主要トレンド

## 関連項目

- [[データレイク]] - レイクハウスのストレージ層の基盤
- [[データウェアハウス]] - レイクハウスが統合した分析機能の源流
- [[データ基盤]] - データレイクハウスを含むデータアーキテクチャ全体
- [[Apache Iceberg]] - レイクハウスを支えるオープンテーブルフォーマット
- [[Apache Parquet]] - レイクハウスのストレージ層で使用される列指向ファイルフォーマット
- [[MLOps]] - レイクハウスをデータ基盤として活用する ML ライフサイクル管理

## 参考

- [NTTデータ - いまさら聞けない！「レイクハウス」とDWH、データレイクの違いとは](https://www.nttdata.com/jp/ja/trends/data-insight/2023/0620/)
- [IBM - Data Warehouses vs. Data Lakes vs. Data Lakehouses](https://www.ibm.com/think/topics/data-warehouse-vs-data-lake-vs-data-lakehouse)
- [Google Cloud - What is a data lakehouse?](https://cloud.google.com/discover/what-is-a-data-lakehouse)
- [Databricks - Lakehouse Data Modeling: Myths, Truths, and Best Practices](https://www.databricks.com/blog/databricks-lakehouse-data-modeling-myths-truths-and-best-practices)
- [Monte Carlo Data - 5 Layers Of Data Lakehouse Architecture Explained](https://www.montecarlodata.com/blog-data-lakehouse-architecture-5-layers/)
- [The 2025 & 2026 Ultimate Guide to the Data Lakehouse](https://datalakehousehub.com/blog/2025-09-2026-guide-to-data-lakehouses/)
