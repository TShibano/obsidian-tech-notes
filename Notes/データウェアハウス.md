---
title: "データウェアハウス"
date: 2026-02-06
tags:
  - Cloud
  - DB
related:
  - "[[データ基盤]]"
  - "[[データレイク]]"
  - "[[データマート]]"
  - "[[データカタログ]]"
  - "[[データレイクハウス]]"
  - "[[SQL]]"
  - "[[Apache Hadoop]]"
  - "[[Apache Hive]]"
  - "[[Apache Spark]]"
  - "[[Snowflake]]"
---

## 概要

データウェアハウス（DWH: Data Warehouse）とは、企業内の複数システムから発生するデータを時系列に蓄積し、分析・意思決定に活用するための「データの倉庫」である。構造化データを対象とし、データを事前に定義されたスキーマに変換して格納する「スキーマ・オン・ライト」方式を採用する。Bill Inmon が1990年代に提唱した概念で、「サブジェクト指向」「統合」「時系列」「非揮発性」の4つの特性を持つ。

## 詳細

### DWH の4つの特性

| 特性 | 説明 |
|------|------|
| **サブジェクト指向** | 業務プロセスではなく、顧客・製品・売上などのビジネステーマ（サブジェクト）ごとにデータを整理する |
| **統合** | 異なるシステム（会計・在庫・顧客管理等）から収集したデータを統一されたフォーマットに変換・統合する |
| **時系列** | 過去のデータを時系列で蓄積し、トレンド分析や比較分析を可能にする |
| **非揮発性** | 一度格納したデータは原則として削除・更新を行わず、履歴として保持する |

### データモデリング手法

#### スタースキーマ（Kimball アプローチ）

Ralph Kimball が提唱したディメンショナルモデリングに基づくデータモデル。中心の**ファクトテーブル**（数値データ・指標）を、複数の**ディメンションテーブル**（分析軸・属性データ）が星型に取り囲む構造をとる。

- **ファクトテーブル**: 売上金額、数量などの計測可能なビジネス指標を格納
- **ディメンションテーブル**: 日付、顧客、製品、店舗などの分析軸を格納
- **メリット**: ジョインが少なくクエリが高速。データ利用者にとって理解しやすい
- **共有ディメンション（DW バス）**: 複数のスタースキーマが共通のディメンションを共有し、全社レベルの統合分析を可能にする

#### スノーフレークスキーマ

スタースキーマのディメンションテーブルをさらに正規化した構造。ストレージ効率は高いが、ジョインが増えるためクエリ性能はやや低下する。

#### Data Vault

Dan Linstedt が提唱した手法。Hub（ビジネスキー）、Link（関係）、Satellite（属性・履歴）の3要素で構成される。変更に強く、監査証跡の管理に優れる。

### よく用いられるツール

#### クラウド DWH

| ツール | 提供元 | 特徴 |
|--------|--------|------|
| **Snowflake** | Snowflake | マルチクラウド対応。ストレージとコンピュートの完全分離。Virtual Warehouse による柔軟なワークロード分離。データシェアリング/マーケットプレイスに強み。半構造化データ（VARIANT 型）対応 |
| **BigQuery** | Google Cloud | サーバーレスでインフラ管理不要。ペタバイト規模のデータをほぼリアルタイムで分析可能。従量課金制。Looker、Vertex AI との統合。ネイティブ JSON 型・STRUCT/ARRAY 対応 |
| **Amazon Redshift** | AWS | AWS エコシステム（S3、Glue、Kinesis、IAM）との緊密な統合。RA3 インスタンスによるストレージとコンピュートの分離。Redshift Serverless で柔軟なスケーリング。SUPER 型で半構造化データ対応 |
| **Azure Synapse Analytics** | Microsoft | Azure エコシステムとの統合。サーバーレスと専用プールの両モード。Power BI とのネイティブ連携 |
| **Databricks SQL** | Databricks | レイクハウスアーキテクチャ上の SQL 分析エンジン。Delta Lake ベース。Apache Spark との統合 |

#### 選定の指針

| 観点 | 推奨ツール |
|------|-----------|
| AWS 中心のアーキテクチャ | Amazon Redshift |
| Google Cloud / サーバーレス重視 | BigQuery |
| マルチクラウド / データ共有 | Snowflake |
| Azure 中心 / Microsoft 連携 | Azure Synapse Analytics |
| レイクハウス志向 | Databricks SQL |

#### オンプレミス DWH

| ツール | 特徴 |
|--------|------|
| **Teradata** | 大規模エンタープライズ向け。高い並列処理性能 |
| **Oracle Exadata** | Oracle DB ベース。ハイブリッドクラウド対応 |
| **IBM Db2 Warehouse** | AI 統合機能。マルチクラウド対応 |

### 最新動向（2025〜2026年）

#### クラウド DWH への全面移行

オンプレミスからクラウド DWH への移行が加速している。初期投資の抑制、柔軟なスケーリング、運用負荷の低減が主な要因。

#### AI・機械学習との統合

各クラウド DWH が AI/ML 機能を組み込みで提供するようになった。BigQuery ML、Snowflake Cortex、Redshift ML など、SQL から直接機械学習モデルを構築・推論できる機能が普及している。

#### レイクハウスとの融合

[[データレイク]]のスケーラビリティと DWH のトランザクション管理を統合したレイクハウスアーキテクチャが台頭。DWH ベンダーもオープンテーブルフォーマット（[[Apache Iceberg]] 等）への対応を進めている。

#### データの民主化

ノーコード・ローコードツールとの連携や、自然言語によるクエリ生成（Text-to-SQL）により、非エンジニアでもデータ分析が可能な環境が整備されつつある。

## ポイント

- DWH は構造化データを時系列で蓄積し、BI・分析に特化したデータストア
- 「サブジェクト指向」「統合」「時系列」「非揮発性」の4つの特性を持つ
- スタースキーマによるディメンショナルモデリングが広く採用されている
- クラウド DWH（Snowflake、BigQuery、Redshift）が主流。選定はクラウドエコシステムとの親和性が鍵
- [[データ基盤]]の3層構造において、[[データレイク]]からデータを受け取り、[[データマート]]へ供給する中間層に位置する

## 関連項目

- [[データ基盤]]
- [[データレイク]]
- [[データマート]]
- [[Apache Iceberg]]
- [[データカタログ]]
- [[データレイクハウス]] - データレイクと DWH を統合したアーキテクチャ
- [[SQL]] - DWH の分析に使用される標準言語
- [[Apache Hadoop]] - Hive が DWH 的な SQL 分析を提供していた分散処理基盤
- [[Apache Hive]] - Hadoop 上で SQL 分析を提供する DWH システム
- [[Apache Spark]] - Spark SQL による大規模データ分析エンジン
- [[Snowflake]] - マルチクラウド対応のクラウドネイティブ DWH

## 参考

- [SAP - DWH（データウェアハウス）とは？5分でわかる最新ガイド](https://www.sap.com/japan/products/data-cloud/datasphere/what-is-a-data-warehouse.html)
- [NTTデータ - 今こそ注目！DWHにおけるデータモデリングとその歴史](https://www.nttdata.com/jp/ja/trends/data-insight/2022/0407/)
- [bix-tech - BigQuery vs Redshift vs Snowflake: The 2026 Technical Buyer's Guide](https://bix-tech.com/bigquery-vs-redshift-vs-snowflake-the-2026-technical-buyers-guide-to-cloud-data-warehouses/)
- [Oracle - データ・ウェアハウスの論理設計](https://docs.oracle.com/cd/E57425_01/121/DWHSG/ch2logdes.htm)
- [Microsoft Learn - スタースキーマと Power BI での重要性を理解する](https://learn.microsoft.com/ja-jp/power-bi/guidance/star-schema)
